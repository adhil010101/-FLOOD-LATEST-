<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin — Flood Reports</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
:root{
  --bg:#0b1220; --panel:#0f172a; --text:#e6eef6; --muted:#94a3b8;
  --accent:#16a34a; --danger:#ef4444; --pending:#f59e0b;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Segoe UI,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);height:100vh;display:flex;flex-direction:column}

/* ---------- Login Page ---------- */
#loginPage {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  height:100vh; background:#0b1220;
}
#loginBox {
  background:#0f172a; padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.5);
  text-align:center;
}
#loginBox h2 { margin:0 0 16px; }
#loginBox input { width:200px; padding:10px; margin-bottom:10px; border-radius:8px; border:0; background:#071025; color:var(--text); }
#loginBox button { padding:10px 16px; border:0; border-radius:8px; cursor:pointer; background:var(--accent); font-weight:700; }

/* ---------- Admin Panel Styles (unchanged) ---------- */
header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:space-between;background:#0a1627}
h1{font-size:18px;margin:0}
main{display:flex;gap:12px;padding:12px;height:calc(100vh - 56px)}
.panel{background:var(--panel);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.45);padding:12px}
#left{flex:2;display:flex;flex-direction:column;gap:12px}
#right{flex:1.2;display:flex;flex-direction:column;gap:12px}
.smallBtn{ padding:8px 10px;border-radius:8px;border:0;background:#071025;color:var(--text);cursor:pointer; margin-left:6px }
.btn{ padding:10px; border-radius:8px; border:0; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,0.35); background:var(--accent); color:#022; font-weight:700 }
.input{ width:100%; padding:10px; border-radius:8px; border:0; background:#071025; color:var(--text) }
.tableBox{ max-height:260px; overflow:auto; border-radius:8px; padding:6px; background:rgba(255,255,255,0.02) }
table{ width:100%; border-collapse:collapse }
th,td{ padding:8px; border-bottom:1px solid rgba(255,255,255,0.06); text-align:left; font-size:13px }
th{ color:var(--muted); font-weight:700 }
.tag{ display:inline-block;padding:4px 8px;border-radius:8px;background:#111827;color:var(--muted);font-size:12px;margin-right:6px }
.sectionTitle{font-weight:700;margin:6px 0 8px 0}
#map{height:300px;border-radius:10px}
.note{font-size:12px;color:var(--muted)}
#tools{display:flex;gap:8px;align-items:center}
.badge{padding:6px 10px; background:#0c1a33; border-radius:8px; font-size:12px}
</style>
</head>
<body>

<!-- ---------- LOGIN SCREEN ---------- -->
<div id="loginPage">
  <div id="loginBox">
    <h2>Admin Login</h2>
    <input id="loginId" placeholder="Admin ID (admin)">
    <input id="loginPass" type="password" placeholder="Password (admin)">
    <button onclick="checkLogin()">Login</button>
    <div id="loginError" style="color:red; display:none; margin-top:10px;">Invalid ID or Password</div>
  </div>
</div>

<!-- ---------- ADMIN PANEL (hidden until login) ---------- -->
<div id="adminPanel" style="display:none;">
<header>
  <div><h1>Admin — Flood Control</h1><div class="note">Review reports, add roads, and sync with users</div></div>
  <div id="authArea">
    <input id="adminId" class="input" style="width:140px;display:inline-block" placeholder="Admin ID (admin)">
    <input id="adminPass" class="input" style="width:140px;display:inline-block" type="password" placeholder="Password (admin)">
    <button id="loginBtn" class="btn">Login</button>
  </div>
  <div id="adminToolsTop" style="display:none;align-items:center;gap:8px">
    <span class="tag" id="pendingCountTop">Pending: 0</span>
    <span id="syncStatus" class="badge">Live sync: ON</span>
    <button id="reloadBtn" class="smallBtn">Reload</button>
    <button id="syncBtn" class="smallBtn">Sync Now</button>
    <button id="logoutBtn" class="smallBtn" style="background:#b91c1c">Logout</button>
  </div>
</header>

<main>
  <!-- ✅ ALL YOUR OLD ADMIN PANEL CONTENT IS HERE UNCHANGED ✅ -->
  <!-- (everything inside <main> ... </main> remains the same from your code) -->
</main>
</div>

<script>
/* ========== AUTH ========== */
const ADMIN_ID='admin', ADMIN_PASS='admin';
function checkLogin(){
  let id=document.getElementById('loginId').value.trim();
  let pw=document.getElementById('loginPass').value;
  if(id===ADMIN_ID && pw===ADMIN_PASS){
    sessionStorage.setItem('adminLogged','1');
    document.getElementById('loginPage').style.display='none';
    document.getElementById('adminPanel').style.display='block';
    if(window.onLogin) onLogin(); // run admin init
  } else {
    document.getElementById('loginError').style.display='block';
  }
}
(function(){
  if(sessionStorage.getItem('adminLogged')==='1'){
    document.getElementById('loginPage').style.display='none';
    document.getElementById('adminPanel').style.display='block';
    if(window.onLogin) onLogin();
  }
})();
</script>

<!-- ✅ KEEP ALL YOUR OLD <script> CODE BELOW THIS ✅ -->
<script>
/* everything from your original script.js (admin functions, map, reports, etc.) goes here unchanged */
</script>

</body>
</html>
